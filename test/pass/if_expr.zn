# Test: if/unless as expressions

func abs_val(x: int) {
    if x < 0 { -x } else { x }
}

func main() {
    # Basic if-else expression
    var x = if true { 42 } else { 0 }
    if x != 42 { return 1 }

    # Nested if expression
    var y = if false { 1 } else { if true { 2 } else { 3 } }
    if y != 2 { return 1 }

    # If expression with computation in branches
    var a = 10
    var b = if a > 5 { a * 2 } else { a + 1 }
    if b != 20 { return 1 }

    # Function returning if expression
    if abs_val(-5) != 5 { return 1 }
    if abs_val(5) != 5 { return 1 }

    # Unless-else expression
    var c = unless false { 100 } else { 200 }
    if c != 100 { return 1 }

    # Else-if chain expression
    var grade = 85
    var letter = if grade >= 90 { 4 } else if grade >= 80 { 3 } else if grade >= 70 { 2 } else { 1 }
    if letter != 3 { return 1 }

    0
}
